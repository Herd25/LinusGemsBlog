{% extends 'base.html' %}
{% import "_macros.jinja" as items with context %}

{% block title %} Home {% endblock %}

{% block dir %} Perfil de {{ g.user['username'] }} {% endblock %}

{% block subtitle %} Resumen de la Actividad {% endblock %}

{% block body %}
    {%- call items.container("table","-cell-xl-10 material-white blockcenter flx") -%}
        {%- call items.contend("-cell-xl-12") -%}
            {{ items.titles("h2","padding-3","Hola Bienvenido {0}".format(g.user['username'])) }}
        {%- endcall -%}

        {%- call items.contend("-cell-xl-12") -%}
            {{ items.titles("h4","padding-3","Resumen del Perfil") }}

            {%- call items.contend("-cell-xl-11","charbart") -%}
                <script>
                    var graphs = {{ plot | safe }};
                    Plotly.plot('charbart',graphs,{});
                </script>
            {%- endcall -%}

            {%- call items.contend("-cell-xl-12") -%}
                {{ items.titles("h3","padding-3","Todos tus Post") }}

                {%- call items.contend("-cell-xl-12") -%}
                    {% call items.table("custom-table-material",values=[ ('<th>id</th>','<th>titulo</th>','<th>creado</th>', '<th>estado</th>', '<th>acciones</th>') ]) %}
                        {% for item in myposts %}
                            <tr>
                                <td>{{ item.id }}</td>
                                <td>{{ item.title }}</td>
                                <td>{{ item.created }}</td>
                                <td>"activo"</td>
                                <td class="actionsbtn">
                                    <a class="button txt-material-white material-yellow" href="{{ url_for('public.update', id=item.id) }}">Modificar</a>
                                    <a class="button txt-material-white material-teal" href="#">Publicar</a>
                                    <a class="button txt-material-white material-red" href="{{ url_for('public.delete', id=item.id) }}">Eliminar</a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% endcall %}
                {%- endcall -%}

                {%- call items.contend("-cell-xl-12") -%}
                    {{ items.titles("h3","padding-3","Comentarios Recibidos") }}

                    {% call items.table("custom-table-flat",values=[ ('<th>#</th>','<th>usuario</th>','<th>comentario</th>', '<th>post</th>', '<th>acciones</th>') ]) %}
                        {% for item in myposts %}
                            <tr>
                                <td>{{ item.id }}</td>
                                <td>{{ g.user['username'] }}</td>
                                <td>{{ item.body|safe }}</td>
                                <td>{{ item.title }}</td>
                                <td class="actionsbtn">
                                    <a class="button txt-material-white material-yellow" href="{{ url_for('public.update', id=item.id) }}">Modificar</a>
                                    <a class="button txt-material-white material-teal" href="#">Publicar</a>
                                    <a class="button txt-material-white material-red" href="{{ url_for('public.delete', id=item.id) }}">Eliminar</a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% endcall %}
                {% endcall %}
            {%- endcall -%}
        {%- endcall -%}
    {%- endcall -%}
{% endblock %}